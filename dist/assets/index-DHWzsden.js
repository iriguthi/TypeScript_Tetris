(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(e){if(e.ep)return;e.ep=!0;const r=a(e);fetch(e.href,r)}})();const f=10,l=20;let i=Array.from({length:l},()=>Array(f).fill(0));const v=[{shape:[[1,1],[1,1]],x:4,y:0,color:"yellow"},{shape:[[1,1,1,1]],x:3,y:0,color:"Cyan"},{shape:[[1,1,0],[0,1,1]],x:3,y:0,color:"red"},{shape:[[0,1,1],[1,1,0]],x:3,y:0,color:"green"},{shape:[[1,1,1],[0,1,0]],x:3,y:0,color:"purple"},{shape:[[1,0,0],[1,1,1]],x:3,y:0,color:"orange"},{shape:[[0,0,1],[1,1,1]],x:3,y:0,color:"blue"}],E=()=>{const t=Math.floor(Math.random()*v.length);return{...v[t]}};let o=E();function h(){const t=document.getElementById("tetris_container");t.innerHTML="",A();for(let n=0;n<l;n++)for(let a=0;a<f;a++){const c=document.createElement("div");c.className="cell";const e=o.shape.some((r,s)=>r.some((u,y)=>u===1&&o.x+y===a&&o.y+s===n));(i[n][a]===1||e)&&(c.classList.add("filled"),c.style.backgroundColor=e?o.color:"gray"),t.appendChild(c)}}function A(){o.shape.forEach((t,n)=>{t.forEach((a,c)=>{if(a===1){const e=o.x+c,r=o.y+n;e>=0&&e<f&&r>=0&&r<l&&i[r]!==void 0&&i[r][e]!==void 0&&i[r][e]===2&&(i[r][e]=0)}})})}function g(){o.shape.forEach((t,n)=>{t.forEach((a,c)=>{if(a===1){const e=o.x+c,r=o.y+n;(e>=0||e<f||r>=0||r<l)&&i[r]!==void 0&&i[r][e]!==void 0&&(i[r][e]=2)}})})}function I(){o.shape.forEach((n,a)=>{n.forEach((c,e)=>{if(c===1){const r=o.x+e,s=o.y+a;r>=0&&r<f&&s>=0&&s<l&&i[s]!==void 0&&i[s][r]!==void 0&&(i[s][r]=1,i[s][r]===2&&(i[s][r]=0))}})}),O(),o.y===0&&(clearInterval(p),alert("GAME OVER")),o=E()}let x=0;function O(){i=i.filter(n=>n.some(a=>a===0));const t=l-i.length;for(x+=t*100,document.getElementById("score").innerText=`${x}`;i.length<l;)i.unshift(Array(f).fill(0))}function w(){L(0,1)?o.y+=1:I(),g(),h()}let T=1e3,p=setInterval(w,T);function L(t,n){return o.shape.every((a,c)=>a.every((e,r)=>{var s;if(e===0)return!0;const u=o.x+r+t,y=o.y+c+n;return!(u<0||u>=f||y>=l||((s=i[y])===null||s===void 0?void 0:s[u])===1)}))}function M(t){return t.every((n,a)=>n.every((c,e)=>{var r;if(c===0)return!0;const s=o.x+e,u=o.y+a;return!(s<0||s>=f||u>=l||((r=i[u])===null||r===void 0?void 0:r[s])===1)}))}function b(){for(let t=0;t<l;t++)for(let n=0;n<f;n++)i[t][n]===2&&(i[t][n]=0);g()}function m(t,n){L(t,n)&&(o.x+=t,o.y+=n),b(),h()}function _(){const t=P(o.shape);M(t)&&(o.shape=t,b(),h())}function P(t){return t.length===0?[]:t[0].map((n,a)=>t.map(c=>{var e;return(e=c[a])!==null&&e!==void 0?e:0}).reverse())}let d=!1;function C(){d?(p=setInterval(w,T),d=!1):(clearInterval(p),d=!0)}document.addEventListener("keydown",N);function N(t){switch(t.key){case"ArrowLeft":d||m(-1,0);break;case"ArrowRight":d||m(1,0);break;case"ArrowDown":d||m(0,1);break;case"ArrowUp":d||_();break;case" ":C();break}}g();h();
